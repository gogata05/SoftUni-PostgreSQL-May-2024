<img src="https://imgur.com/uEq24tQ.png" alt="Certificate"/>
 
### üìö SoftUni-PostgreSQL-May-2024
 
### üéì Course Link - [Here](https://softuni.bg/trainings/4536/postgresql-may-2024)

Welcome to the PostgreSQL! This course will equip participants with the knowledge and skills required to work with PostgreSQL databases. Throughout this course, you will delve into various aspects of: databases,transaction,storage,data handling,relationships and more.
 
#### Skills You Will Gain

- Working with databases
- Transaction Management
- Data handling and storage
- Aggregating data in PostgreSQL
- Working with relationships between tables
- It is used by procedures and functions

### About the Course

Databases are the standard way to use dynamic technology over time, making them an indispensable part of almost every application. The intensive database fundamentals course will introduce you to one of the most widely used database management systems (DBMS) used in the development of various information systems - PostgreSQL. The course focuses on relational models, ER diagrams (tables and relational relationships) and working with the SQL language (data extraction, selection, projection, combining aggregation, grouping, modification, deletion and insertion). Fundamental knowledge of working with functions, procedures, transactions, and triggers is provided. This course lays the foundations of working with databases, making it easier to use them in real-world applications and to understand concepts such as object-oriented model (ORM) database conversion.


# Plans and Theory Tests

## Theory Tests
---

[Databases Introduction. Data Definition and Datatypes.](https://forms.gle/5cx8VGsR2R2oX6Dt6)

---

[Basic CRUD](https://forms.gle/VHcF8oj5qLz7a9ec7)

---

[Built-in Functions](https://forms.gle/zUacHr5xNV8YNVme7)

---

[Data Aggregation](https://forms.gle/zDr5w2v5uDfTxT6v5)

---

[Table Relations](https://forms.gle/qYAZDquBNGSQmTYx9)

---

[Subqueries and Joins](https://forms.gle/iquiVSbKE2xd7QRTA)

---

[Data Programmability](https://forms.gle/bWeXZg21VBwMLyQ17)

---

## Plans

### Databases Introduction. Data Definition and Datatypes.

`–ï–¥–Ω–æ –µ —Å–∞–º–æ –¥–∞ —Å—ä—Ö—Ä–∞–Ω—è–≤–∞–º–µ –¥–∞–Ω–Ω–∏, –¥—Ä—É–≥–æ –µ –≤–µ—á–µ –¥–∞ –≥–∏ –º–µ–Ω–∏–∂–∏—Ä–∞–º–µ`

1. –ü—Ä–æ–±–ª–µ–º–∞ —Å flat storage (—Ñ–∞–π–ª–æ–≤–µ)

- –†–∞–∑–º–µ—Ä
- –°–ª–æ–∂–Ω–æ—Å—Ç –Ω–∞ —ä–ø–¥–µ–π—Ç–≤–∞–Ω–µ
- –¢–æ—á–Ω–æ—Å—Ç
- –ö–æ–π –∏–º–∞ –¥–æ—Å—Ç—ä–ø 

2. –ö–∞–∫–≤–æ –µ DBMS

- DataBase Management System 
- –°–∏—Å—Ç–µ–º–∞ –æ–ø—Ç–∏–º–∏–∑–∏—Ä–∞–Ω–∞ –∑–∞ —Ç—ä—Ä—Å–µ–Ω–µ –∏ –æ–±—Ä–∞–±–æ—Ç–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏
- –ù—è–º–∞–º–µ –¥–∏—Ä–µ–∫—Ç–µ–Ω –¥–æ—Å—Ç—ä–ø –¥–æ —Ñ–∞–π–ª–æ–≤–µ—Ç–µ, DBMS —Å–µ –≥—Ä–∏–∂–∏ –∑–∞ —Ç–æ–≤a
- –ù–∏–µ –ø—É—Å–∫–∞–º–µ –∑–∞—è–≤–∫–∞ –∫—ä–º engine-a, –µngine-a –æ–±—Ä–∞–±–æ—Ç–≤–∞ –∑–∞—è–≤–∫–∞—Ç–∞ –≤–∑–∏–º–∞ –æ—Ç —Ñ–∞–π–æ–≤–µ—Ç–µ –∏ –≤—Ä—ä—â–∞ –Ω–∞ –Ω–∞—Å.
- –†–∞–±–æ—Ç–∏–º –ø–æ TCP/IP –ø—Ä–æ—Ç–æ–∫–æ–ª–∞, –Ω–æ –≤—ä—Ä—Ö—É –ª–æ–∫–∞–ª–Ω–∞—Ç–∞ –º–∞—à–∏–Ω–∞;
- RDBMS - –¥–∞–Ω–Ω–∏—Ç–µ –∏ engine-a; Relational Database Management System;

3. SQL/NoSQL
- –ü–æ–ª–∑–≤–∞–º–µ SQL, –∫–æ–≥–∞—Ç–æ —Å–∫–∞–ª–∏—Ä–∞–º–µ –≤–µ—Ä—Ç–∏–∫–∞–ª–Ω–æ(upgrade –Ω–∞ –º–∞—à–∏–Ω–∞—Ç–∞)
- –ü–æ–ª–∑–≤–∞–º–µ NoSQL, –∫–æ–≥–∞—Ç–æ —Å–∫–∞–ª–∏—Ä–∞–º–µ —Ö–æ—Ä–∏–∑–æ–Ω–∞—Ç–ª–Ω–æ(–Ω–æ–≤–∞ –º–∞—à–∏–Ω–∞)

`–ò–¥–µ—è—Ç–∞ –Ω–∞ SQL —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –µ –¥–∞ –µ –∫–∞—Ç–æ –∏–∑—Ä–µ—á–µ–Ω–∏–µ`

3. –ß–∞—Å—Ç–∏ –Ω–∞ –µ–¥–Ω–∞ –∑–∞—è–≤–∫–∞
- –ó–∞—è–≤–∫–∏ - ALTER TABLE, ALTER COLUMNN, SELECT...
- –ö–ª–∞—É–∑–∏ - update/delete –∏ —Ç–Ω
- –ò–∑—Ä–∞–∑–∏ - salary * 1.1
- –ü—Ä–µ–¥–∏–∫–∞—Ç–∏ - job_title = "Cashier"
- –°—Ç–µ–π—Ç–º—ä–Ω—Ç–∏ - Update Set Where, —Ü–µ–ª–∏—è –∏–∑—Ä–∞–∑

4. –õ–æ–≥–∏—á–µ—Å–∫–∏ —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ 4 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

- Data Definition - –æ–ø–∏—Å–≤–∞–º–µ –∫–∞–∫–≤–∏ —Å–∞ –Ω–∞—à–∏—Ç–µ –¥–∞–Ω–Ω–∏, –∫–∞–∫ –∏–∑–≥–ª–µ–∂–¥–∞—Ç –¥–∞–Ω–Ω–∏—Ç–µ, –∫–∞–∫ —Å–∞ –æ–±–≤—ä—Ä–∑–∞–Ω–∏, –∫–∞–∫ —â–µ –∏–∑–≥–ª–µ–∂–¥–∞ –Ω–∞—à–∞—Ç–∞ —Å—Ö–µ–º–∞
- Data Manipulation - READ/CREATE/UPDATE/DELETE
- Data Control - –∫–æ–Ω—Ç—Ä–æ–ª –≤—ä—Ä—Ö—É –ø—Ä–∞–≤–∞—Ç–∞ –∏–ª–∏ –∫–æ–π –∏–º–∞ –¥–æ—Å—Ç—ä–ø –¥–æ –¥–∞–Ω–Ω–∏—Ç–µ
- Transaction Control - –¥–∞–ª–∏ –¥–∞ –ø—É—Å–Ω–µ–º –∑–∞—è–≤–∫–∏—Ç–µ –∫–∞—Ç–æ –≥—Ä—É–ø–∞, —Ç–æ–µ—Å—Ç –∏–∑–ø—ä–ª–Ω—è–≤–∞—Ç —Å–µ –≤—Å–∏—á–∫–∏ –∏–ª–∏ –Ω–∏—Ç–æ –µ–¥–Ω–∞.

5. –ó–∞—â–æ –Ω–∏ —Ç—Ä—è–±–≤–∞—Ç —Ä–µ–ª–∞—Ü–∏–∏

- –ü–æ–ª—É—á–≤–∞–º–µ –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è, –≥—ä–≤–∫–∞–≤–æ—Å—Ç –∏ –Ω–µ –ø–æ–≤—Ç–∞—Ä—è–º–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è
- –ù—è–º–∞–º–µ –ø—Ä–∞–∑–Ω–∏ –∑–∞–ø–∏—Å–∏ (–∏–º–∞ —Å–ª—É—á–∞–∏, –≤ –∫–æ–∏—Ç–æ –µ –æ–∫–µ–π –¥–∞ –∏–º–∞–º–µ –ø—Ä–∞–∑–Ω–∏ –∑–∞–ø–∏—Å–∏. –ü—Ä–∏–º–µ—Ä –∑–∞ –ø—Ä–µ–∑–∏–º–µ, –∑–∞—â–æ—Ç–æ —á–æ–≤–µ–∫ –∏–º–∞ —Å–∞–º–æ –µ–¥–Ω–æ —Ç–∞–∫–æ–≤–∞ –∏ –Ω–µ –µ –∑–∞–¥—ä–ª–∂–∏—Ç–µ–ª–Ω–æ)

6. –ö–ª—é—á–æ–≤–µ

- Primary - –≤–∏–Ω–∞–≥–∏ —É–Ω–∏–∫–∞–ª–Ω–∏
- Foreign

7. Entity/Relation –¥–∏–∞–≥—Ä–∞–º–∞

- –º–æ–∂–µ–º –¥–∞ –≤–∏–∂–¥–∞–º–µ —Å—Ö–µ–º–∏—Ç–µ –∏ –≤—Ä—ä–∑–∫–∏—Ç–µ –º–µ–∂–¥—É —Ç–∞–±–ª–∏—Ü–∏—Ç–µ

8. –¢–∏–ø–æ–≤–µ –¥–∞–Ω–Ω–∏

- INT - small/int/big
- DECIMAL/NUMERIC - –º–æ–∂–µ–º –¥–∞ –∫–∞–∂–µ–º, –¥–æ –∫–æ–π —Å–∏–º–≤–æ–ª —Å–ª–µ–¥ –¥–µ—Å–µ—Ç–∏—á–Ω–∞—Ç–∞ –∑–∞–ø–µ—Ç–∞—è –¥–∞ —Ñ–∏–∫—Å–∏—Ä–∞–º–µ
- REAL - –ø–∞–∑–∏ –ø–æ-–º–∞–ª–∫–∞ —Ç–æ—á–Ω–æ—Å—Ç –æ—Ç double
- DOUBLE

- SERIAL - –°—ä–∑–¥–∞–≤–∞ —Å–∫—Ä–∏–ø—Ç, –∫–æ–∏—Ç–æ –¥–∞ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–∞ —á–∏—Å–ª–æ—Ç–æ –Ω–∞ –≤—Å–µ–∫–∏ –Ω–æ–≤ –∑–∞–ø–∏—Å, –æ—Å—Ç–∞–≤—è –≤—Ä–∞—Ç–∞—Ç–∞ –æ—Ç–≤–æ—Ä–µ–Ω–∞ –∑–∞ —Ç–æ–≤–∞ –Ω–∏–µ —Ä—ä—á–Ω–æ –¥–∞ –ø–æ–¥–∞–¥–µ–º —Å—Ç–æ–π–Ω–æ—Å—Ç;
- GENERATED ALWAYS AS IDENTITY - –°—ä–∑–¥–∞–≤–∞ —Å–∫—Ä–∏–ø—Ç, –∫–æ–∏—Ç–æ –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∏—Ä–∞ —á–∏—Å–ª–æ—Ç–æ, –±–µ–∑ –¥–∞ –Ω–∏ –ø–æ–∑–≤–æ–ª—è–≤–∞ –¥–∞ –≤—ä–≤–µ–¥–µ–º —Å—Ç–æ–π–Ω–æ—Å—Ç —Ä—ä—á–Ω–æ

- CHAR (255 symbols)
- VARCHAR (65 535 symbols)
- TEXT (65 535 symbols)
- BLOB

- DATE - –¥–∞—Ç–∞ –±–µ–∑ –≤—Ä–µ–º–µ - YYYY-MM-DD
- TIME - –≤—Ä–µ–º–µ –±–µ–∑ –¥–∞—Ç–∞
- TIMESTAMP - –¥–∞—Ç–∞ –∏ —á–∞—Å
- TIMESTAMPZ - –¥–∞—Ç–∞, —á–∞—Å –∏ —á–∞—Å–æ–≤–∞ –∑–æ–Ω–∞

–ë–æ–Ω—É—Å: –ò–Ω–¥–µ–∫—Å–∏ - –¥–≤–∞ –≤–∏–¥–∞

- –ü–æ–ª–∑–≤a–º–µ –≥–∏, –∫–æ–≥–∞—Ç–æ —á–µ—Å—Ç–æ —Ç—ä—Ä—Å–∏–º –ø–æ –µ–¥–Ω–æ –ø–æ–ª–µ
- Clustered - –≥—Ä—É–ø–∏—Ä–∞–Ω –ø–æ –Ω—è–∫–∞–∫—ä–≤ –Ω–∞—á–∏–Ω, —á–µ—Å—Ç–æ –ø–æ–ª–∑–≤–∞–º–µ primary key-a
- Non-Clustered - –∏–Ω–¥–µ–∫—Å–∏—Ä–∞–º–µ –ø–æ –≤—Å—è–∫–æ –ø–æ–ª–µ, –ø–æ –∫–æ–µ—Ç–æ –ø–æ–∂–µ–ª–∞–µ–º –∏–º–∞–º–µ –ª–∏–Ω–∫–æ–≤–µ –∫—ä–º —Ä–µ–∞–ª–Ω–∏—Ç–µ –¥–∞–Ω–Ω–∏
  
---
  
### CRUD - Create, Read, Update, Delete

1. –ò–∑–≤–ª–∏—á–∞–º–µ –¥–∞–Ω–Ω–∏ —Å—ä—Å SELECT - READ
- Mo–∂–µ–º –¥–∞ —Ñ–∏–ª—Ç—Ä–∏—Ä–∞–º–µ —Å WHERE 
- SELECT * FROM project WHERE start_date='2023-06-01';
- ORDER BY - —Å–æ—Ä—Ç–∏—Ä–∞ –¥–∞–Ω–Ω–∏—Ç–µ
  - SELECT * FROM project ORDER BY id
  - ORDER BY first_name DESC, last_name ASC;
- SELECT id as 'No.' ...;
- SELECT e.id FROM employees as e;
- CONCAT() ex. SELECT CONCAT(first_name, ' ', second_name) as full_name ...;
- CONCAT_WS(); –∫–æ–Ω–∫–∞—Ç–µ–Ω–∏—Ä–∞ –ø—Ä–æ–ø—É—Å–∫–∞–π–∫–∏ NULL —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ
- SELECT DISTINCT –µ–ª–∏–º–∏–Ω–∏—Ä–∞ –¥—É–±–ª–∏—Ä–∞—â–∏ —Å–µ —Ä–µ–∑—É–ª—Ç–∞—Ç–∏
- WHERE; WHERE id NOT IN ...; WHERE id = 1 OR/AND ...; WHERE id IN (1, 2, 3);
- NULL != 0 != '';
- WHERE id IS NULL; –≥—Ä–µ—à–Ω–æ –µ –¥–∞ –ø–∏—à–µ–º WHERE id = NULL;
- LIMIT 3; –ª–∏–º–∏—Ç–∏—Ä–∞–º–µ –±—Ä–æ–π–∫–∞—Ç–∞ —Ä–µ–¥–æ–≤–µ, –∫–æ–∏—Ç–æ —Å–µ –ø–æ–ª—É—á–∞–≤–∞—Ç;
- OFFSET 3 LIMIT 1; –ø—Ä–µ—Å–∫–∞—á–∞ –ø—ä—Ä–≤–∏—Ç–µ 3 —Ä–µ–¥–∞ –∏ –≤–∑–∏–º–∞ —Å–ª–µ–¥–≤–∞—â–∏—è 1;
-
     `CREATE TABLE customer_contancts AS
  	 SELECT 
  	    customer_id, 
              first_name 
  	 FROM customers;`
     
- –°—ä–∑–¥–∞–≤–∞ —Ç–∞–±–ª–∏—Ü–∞ —Å –ø–æ–ª–µ—Ç–∞—Ç–∞ –æ—Ç –¥—Ä—É–≥–∞ —Ç–∞–±–ª–∏—Ü–∞, –Ω–æ –±–µ–∑ –¥–∞–Ω–Ω–∏—Ç–µ;   
- BETWEEN 1 AND 3 - –ø–æ–ª–∑–≤–∞ <= >=;

1.1 –ü—Ä–æ–µ–∫—Ü–∏—è - –∫–∞–∫–≤–∏ –∫–æ–ª–æ–Ω–∏ –∏—Å–∫–∞–ºe –¥–∞ –≤–∑–µ–º–µ–º

1.2 –°–µ–ª–µ–∫—Ü–∏—è - –∫–æ–≥–∞—Ç–æ –≤–∑–∏–º–∞–º –Ω—è–∫–∞–∫–≤–∏ —Ä–µ–¥–æ–≤–µ - —á–µ—Å—Ç–æ –ø–æ—Å—Ç–∏–≥–∞–º–µ —á—Ä–µ–∑ WHERE

1.3 Join - –∫–æ–º–±–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –∫–æ–ª–æ–Ω–∏

</br>

2.–û–±–Ω–æ–≤—è–≤–∞–º–µ –¥–∞–Ω–Ω–∏ —Å UPDATE
- –ò—Å–∫–∞–º–µ –¥–∞ update-–≤–∞–º–µ —Å —É—Å–ª–æ–≤–∏–µ –≤ 99% –æ—Ç —Å–ª—É—á–∞–∏—Ç–µ
  `UPDATE projects 
     SET end_date = '2006-02-02' 
     WHERE start_date = '2005-01-01';`

2.2 INSERT
- NOW() - –¥–∞–≤–∞ —Ç–µ–∫—É—â–æ—Ç–æ –≤—Ä–µ–º–µ;
   `INSERT INTO projects(name, start_date)
     SELECT 
         CONCAT(name, ' ', last_name), 
         NOW()
     FROM departments;`

3.–ò–∑—Ç—Ä–∏–≤–∞–Ω–µ –Ω–∞ –¥–∞–Ω–Ω–∏ —Å DELETE 
- `DELETE FROM projects WHERE start_date = '2006-01-01';`

4.Views - –∑–∞–ø–∞–∑–≤–∞–º–µ –∑–∞—è–≤–∫–∏ –∑–∞ —Å–µ–ª–µ–∫—Ç–∏—Ä–∞–Ω–µ
- `CREATE VIEW v_hr_result_set AS 
     SELECT 
         CONCAT(fisrt_name, ' ', last_name) AS 'full name',
         salary
     FROM employees ORDER BY department_id;` 
   
- `SELECT * FROM v_hr_result_set` - –∑–∞ –¥–∞ –ø–æ–ª–∑–≤–∞–º–µ view-—Ç–æ
- A–∫–æ –∏—Å–∫–∞–º–µ –¥–∞ –ø—Ä–æ–º–µ–Ω–∏–º –∏–ª–∏ update-–Ω–µ–º view –∫–∞–∑–≤–∞–º–µ `ALTER VIEW`
 
 ---

BUILD IN FUNCTIONS

1. String, Math, Date And Time

2. String Functions
   - SUBSTRING(string, position, length: optional) - String from Position for Length, —Å—ä—â–æ –º–æ–∂–µ –¥–∞ –±—ä–¥–µ –∏–∑–ø–æ–ª–∑–≤–∞–Ω –∑–∞ —Ç–æ–≤–∞ –¥–∞–ª–∏ –µ–¥–∏–Ω —Å—Ç—Ä–∏–Ω–≥ –µ —Å—ä–±—Å—Ç—Ä–∏–Ω–≥ –Ω–∞ –¥—Ä—É–≥.
   - REPLACE(string, string to replace, to replace with) - case sensitive
   - LTRIM, RTRIM - –º–∞—Ö–∞ –ø—Ä–∞–∑–Ω–∏ —Ä–∞–∑—Å—Ç–æ—è–Ω–∏—è –æ—Ç –ª—è–≤–æ –∏ –æ—Ç –¥—è—Å–Ω–æ 
	    - –Ω—è–º–∞–º–µ –ø–æ–ª–∑–∞ –¥–∞ –ø–∞–∑–∏–º –ø—Ä–∞–∑–Ω–∏ –º–µ—Å—Ç–∞; 
	    - –º–æ–∂–µ–º –¥–∞ –∏–∑—Ç—Ä–∏–≤–∞–º–µ –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω —Å–∏–º–≤–æ–ª;
      - —â–µ –∏–∑—Ç—Ä–∏–≤–∞–º–µ –≤—Å–µ–∫–∏ —Å–∏–º–≤–æ–ª –¥–æ–∫–∞—Ç–æ –Ω–µ –Ω–∞–º–µ—Ä–∏–º —Ä–∞–∑–ª–∏—á–µ–Ω –æ—Ç —Ç–æ–∑–∏, –∫–æ–π—Ç–æ —Ç—ä—Ä—Å–∏–º.
   - CHAR_LENGTH - STRING LENGTH;
   - LENGTH - –í—Ä—ä—â–∞ –¥—ä–ª–∂–∏–Ω–∞—Ç–∞ –Ω–∞ –µ–¥–∏–Ω —Å—Ç—Ä–∏–Ω–≥.
   - OCTET_LENGTH - –í—Å–µ–∫–∏ —Å–∏–º–≤–æ–ª –æ—Ç ascii —Ç–∞–±–ª–∏—Ü–∞—Ç–∞ –µ 1 –±–∞–π—Ç, –∑–∞ –æ—Å—Ç–∞–Ω–∞–ª–∏—Ç–µ –∑–∞–≤–∏—Å–∏ –æ—Ç encoding-a => "caf√©" => c - 1byte, a - 1byte, f - 1byte, √© - 2 bytes;
   - LEFT, RIGHT, (string count)- –≤–∑–µ–º–∞—Ç n –Ω–∞ –±—Ä–æ–π –µ–ª–µ–º–µ–Ω—Ç–∏, –ª—è–≤–æ –∏ –¥—è—Å–Ω–æ; –º–æ–∂–µ–º –¥–∞ –ø–æ–¥–∞–≤–∞–º–µ –æ—Ç—Ä–∏—Ü–∞—Ç–µ–ª–Ω–∏ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏ –∏ –ø–æ —Ç–æ–∑–∏ –Ω–∞—á–∏–Ω –¥–∞ –≤–∑–∏–º–∞–º–µ –≤—Å–∏–∫–æ –±–µ–∑ –ø–æ—Å–ª–µ–¥–Ω–∏—Ç–µ n –µ–ª–µ–º–µ–Ω—Ç–∏.
   - LOWER, UPPER, (string)
   - REVERSE, (string)
   - REPEAT, (string, count)
   - INSERT(String, Position, chars count to delete, sub string)
   - POSITION - ex. POSITION('b' IN some_field) - –≤—Ä—ä—â–∞ –∏–Ω–¥–µ–∫—Å–∞, –Ω–∞ –∫–æ–π—Ç–æ –µ –Ω–∞–º–µ—Ä–∏–ª–æ –≤—ä–ø—Ä–æ—Å–Ω–∞—Ç–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç.

3. Math Functions
   - DIV, —Ü–µ–ª–æ—á–∏—Å–ª–µ–Ω–æ –¥–µ–ª–µ–Ω–∏–µ
   - MOD, –º–æ–¥—É–ª–Ω–æ –¥–µ–ª–µ–Ω–∏–µ
   - /, -, *, +
   - –êBS
   - PI
   - SQRT (NUMBER)
   - POW (NUMBER, POWER) - —Å—Ç–µ–ø–µ–Ω—É–≤–∞–Ω–µ
   - ROUND - UP >= 5 DOWN 4 <= - (NUMBER, PERCISION)
   - FLOOR, CEIL
   - SIGN(NUMBER) - –≤—Ä—ä—â–∞ –∑–Ω–∞–∫–∞ –∫–∞—Ç–æ 1, -1 –∏–ª–∏ 0
   - RANDOM() - –≤—Ä—ä—â–∞ —á–∏—Å–ª–æ –º–µ–∂–¥—É 0 –∏ 1
     - CEIL(rand() * 100) MOD 7; –≤—Ä—ä—â–∞ —á–∏—Å–ª–æ –º–µ–∂–¥—É 0 –∏ 6;

4. Date Functions
   - EXTRACT (PART FROM DATE) - PART - YEAR, MONTH, DAY, MINUTES...
   - AGE() - –≤—Ä—ä—â–∞ —Ä–∞–∑–ª–∏–∫–∞—Ç–∞ –º–µ–∂–¥—É –¥–≤–µ –¥–∞—Ç–∏
   - TO_CHAR() 
	- TO_CHAR(NOW() AT TIME ZONE 'UTC', 'YYYY-MM-DD HH24:MI:SS TZD');
	- –†–µ–∑—É–ª—Ç–∞—Ç '2023-09-20 12:34:56 UTC'

5. WILD_CARDS
   - LIKE() - –ø–æ–¥–æ–±–Ω–æ –Ω–∞ —Ä–µ–≥–µ–∫—Å —Ç—ä—Ä—Å–∏ –¥–∞–ª–∏ –Ω–µ—â–æ –∑–∞–ø–æ—á–≤–∞/–∑–∞–≤—ä—Ä—à–≤–∞ –∏–ª–∏ –¥–≤–µ—Ç–µ –µ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –Ω–∞ –Ω—è–∫–∞–∫—ä–≤ string/pattern
	    - % –æ–∑–Ω–∞—á–∞–≤–∞ 0 –∏–ª–∏ –ø–æ–≤–µ—á–µ —Å–∏–º–≤–æ–ª–∏ –ø—Ä–µ–¥–∏/—Å–ª–µ–¥ string-a 
	    - _ –µ –∑–∞ –ø–æ–ø—ä–ª–≤–∞–Ω–µ –Ω–∞ —Ç–æ—á–Ω–∞ –ø–æ–∑–∏—Ü–∏—è 
   - REGEXP

---

### Data Aggregation

<b>–ê–≥—Ä–µ–≥–∞—Ü–∏—è - –ø—Ä–æ—Ü–µ—Å –Ω–∞ –æ–±–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–∞ —Ä–∞–∑–ª–∏—á–Ω–∏ –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ –µ–¥–Ω–∞ —Å–∏—Å—Ç–µ–º–∞.</b>

1. Grouping 
- –¢—Ä–µ—Ç–∏—Ä–∞–º–µ –µ–¥–Ω–∞–∫–≤–∏ –∑–∞–ø–∏—Å–∏ –∫–∞—Ç–æ –µ–¥–∏–Ω 
- –ü—Ä–∏ GROUP BY, –∑–∞ —Ä–∞–∑–ª–∏–∫–∞ –æ—Ç distinct –º–æ–∂–µ–º –¥–∞ –ø–æ–ª–∑–≤–∞–º–µ –∞–≥—Ä–µ–≥–∏—Ä–∞—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- COUNT(DISTINCT()) - —â–µ –¥–∞–¥–µ –±—Ä–æ—è –Ω–∞ –≥—Ä—É–ø–∏—Ç–µ
- COUNT(*) - –±—Ä–æ–π —Ä–µ–¥–æ–≤–µ—Ç–µ

2. Aggregate functions
- AVG, MIN, MAX, COUNT, SUM

3. Having 

- –î–æ–ø—ä–ª–Ω–∏—Ç–µ–ª–Ω–∞ —Ñ–∏–ª—Ç—Ä–∞—Ü–∏—è, –≤ –∫–æ—è—Ç–æ –º–æ–∂–µ–º –¥–∞ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ –∞–≥—Ä–µ–≥–∏—Ä–∞—â–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –ò–∑–≤—ä—Ä—à–≤–∞ —Å–µ —Å–ª–µ–¥ –∫–∞—Ç–æ –¥–∞–Ω–Ω–∏—Ç–µ —Å–∞ –≤–∑–µ—Ç–∏

4. CASE

- Simple Case
  - –ò–∑–ø–æ–ª–∑–≤–∞–º–µ, –∫–æ–≥–∞—Ç–æ —Å—Ä–∞–≤–Ω—è–≤–∞–º–µ —Å–∞–º–æ –µ–¥–Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç

```sql
SELECT 
    column_name,
    CASE grade
        WHEN 'A' THEN 'Excellent'
        WHEN 'B' THEN 'Good'
        WHEN 'C' THEN 'Fair'
        ELSE 'Poor'
    END AS grade_description
FROM student_grades;
```


- General Case
  - –ò–∑–ø–æ–ª–∑–≤–∞–º–µ, –∫–æ–≥–∞—Ç–æ  —Å—Ä–∞–≤–Ω—è–≤–∞–º–µ —Ä–∞–∑–ª–∏—á–Ω–∏ —É—Å–ª–æ–≤–∏—è


```sql
SELECT 
    column_name,
    CASE 
        WHEN grade >= 90 THEN 'Excellent'
        WHEN grade >= 80 THEN 'Good'
        WHEN grade >= 70 THEN 'Fair'
	WHEN grade <= 0 THEN 'Mistake'
        ELSE 'Poor'
    END AS grade_description
FROM student_grades;
```

Edge cases to keep in mind:

* COUNT() - –±—Ä–æ–∏ –≤—Å–∏–∫–æ –±–µ–∑ Null
* where —Å–µ –∏–∑–ø—ä–ª–Ω—è–≤–∞ –ø—Ä–µ–¥–∏ –¥–∞ —Å–µ –≤—ä—Ä–Ω–∞—Ç –¥–∞–Ω–Ω–∏—Ç–µ, –Ω–µ—â–æ –∫–∞—Ç–æ if, –≤—ä—Ä—Ö—É —Ç–æ–∑–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç –ø—Ä–∞–≤–∏–º –≥—Ä—É–ø–∏—Ä–∞–Ω–µ –∏ –≤—ä—Ä—Ö—É –Ω–µ–≥–æ —á–∞–∫ —Ç–æ–≥–∞–≤–∞ having
* where —Ñ–∏–ª—Ç—Ä–∏—Ä–∞ –ø—Ä–µ–¥–∏ –¥–∞ —Å–µ –≤–∑–µ–º–∞—Ç –¥–∞–Ω–Ω–∏—Ç–µ, –¥–æ–∫–∞—Ç–æ having –µ —Å–ª–µ–¥ –∫–∞—Ç–æ —Å–∞ –≤–∑–µ—Ç–∏

---

### Table Relations


1. Entites - –°—Ç—ä–ø–∫–∏ –≤ DB Design
   
   1.1 –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –æ–±–µ–∫—Ç–∏
   	- –í—Å—è–∫–∞ —Ç–∞–±–ª–∏—Ü–∞ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–≤–∞ –æ–±–µ–∫—Ç

   1.2 –°—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ –∫–æ–ª–æ–Ω–∏
   
   1.3 –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ PK
   	- ID-—Ç–∞—Ç–∞ —Å–∞ INT –∏–ª–∏ STRING 
	- –ü–æ-—Å–∏–≥—É—Ä–Ω–æ –µ –¥–∞ —Å–∞ —Å—Ç—Ä–∏–Ω–≥–æ–≤–µ, –∑–∞—â–æ—Ç–æ –ø–æ-—Ç—Ä—É–¥–Ω–æ —Å–µ —Ä–∞–∑–±–∏–≤–∞—Ç —Å brute force
   	- –ê–∫–æ –Ω–µ—â–æ –µ PK, —Ç–æ —Ç–æ –≤–µ—á–µ –µ Unique
   	  
   1.4 –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ —Ä–µ–ª–∞—Ü–∏–∏
        - Many To One
        - Many To Many - –ø–æ—Å—Ç–∏–≥–∞–º–µ —á—Ä–µ–∑ junction/mapping table
        - One To One
   
   1.5 –î–µ—Ñ–∏–Ω–∏—Ä–∞–Ω–µ –Ω–∞ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è - CONSTRAINTS
   
   1.6 –ü–æ–ø—ä–ª–≤–∞–Ω–µ —Å —Ç–µ—Å—Ç–æ–≤–∏ –¥–∞–Ω–Ω–∏

3. Cascade delete
   - –ò–∑—Ç—Ä–∏–≤–∞–π–∫–∏ –µ–¥–∏–Ω –∑–∞–ø–∏—Å, —Å–≤—ä—Ä–∑–∞–Ω —Å –¥—Ä—É–≥–∏ –∑–∞–ø–∏—Å–∏ –ø–æ—Å—Ä–µ–¥—Å—Ç–≤–æ–º —Ä–µ–ª–∞—Ü–∏—è, –∏–∑—Ç—Ä–∏–≤–∞–º–µ –≤—Å–∏—á–∫–∏ –∑–∞–ø–∏—Å–∏.

   - –ò–∑–ø–æ–ª–∑–≤–∞–º–µ, –∫–æ–≥–∞—Ç–æ –∏—Å–∫–∞–º–µ –¥–∞ –∑–∞–ø–∞–∑–∏–º –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç –Ω–∞ –¥–∞–Ω–Ω–∏—Ç–µ
   - –ù–µ –≥–æ –∏–∑–ø–æ–ª–∑–≤–∞–º–µ, –∫–æ–≥–∞—Ç–æ –∏—Å–∫–∞–º–µ –¥–∞ –∑–∞–ø–∞–∑–∏–º –Ω—è–∫–∞–∫–≤–∞ –∏—Å—Ç–æ—Ä–∏—è –∏–ª–∏ –ª–æ–≥–æ–≤–µ.


Good to keep in mind:

*–ö–æ–º–ø–æ–∑–∏—Ç–µ–Ω –∫–ª—é—á –µ –∫–ª—é—á —Å—ä–∑–¥–∞–¥–µ–Ω –æ—Ç —É—Å–ª–æ–≤–∏–µ –ø—Ä–∏–º–µ—Ä concat(f_name, l_name)

---

### Subqueries and Joins

1. Joins - better than selects with where in performance
   - Inner Join - Default join - join where both are not null, if one is null both are not visualized
   - Left Join - Join the left table if right is null
   - Right Join - Join the right if left is null
   - Full join (union) - join everything
   - Outer join (union) - less used
   - Cross Join - every element from one table with every element from the other - not used often

2. Subqueries
   - SELECT FROM SELECT
   - Example:
   ```sql
   
   SELECT first_name, last_name, department, salary
   FROM employees
   WHERE salary > (
      SELECT AVG(salary)
      FROM employees
      WHERE department = 'Finance'
   );

3. Indicies
   - –ò–Ω–¥–µ–∫—Å–∏—Ä–∞–Ω–µ –Ω–∞ —Ç–∞–±–ª–∏—Ü–∞ –µ —Å—ä–∑–¥–∞–≤–∞–Ω–µ –Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≤—ä—Ä—Ö—É –Ω–∞—à–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞, –∫–æ—è—Ç–æ –≥–ª–µ–¥–∞ –∏ –∞–Ω–∞–ª–∏–∑–∏—Ä–∞ –Ω–∞—à–∞—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ –∏ –ø—Ä–∞–≤–∏ –µ–¥–∏–Ω –≤–∏–¥ —à–æ—Ä—Ç–∫—ä—Ç
   - –ö–∞—Ç–æ –≥–æ–ª—è–º–∞ –∫–Ω–∏–≥–∞, —Å —Ä–∞–∑–¥–µ–ª–∏—Ç–µ–ª–∏ –∏ –ø—Ä–∏–º–µ—Ä–Ω–æ, –∞–∫–æ —Ç—ä—Ä—Å–∏—à –∑–µ–±—Ä–∞ –æ—Ç–∏–≤–∞—à –Ω–∞ –±—É–∫–≤–∞—Ç–∞ –ó
   - –î–≤–∞ –≤–∏–¥–∞ –∏–Ω–¥–µ–∫—Å–∏
	- Clustered - —Å–æ—Ä—Ç–∏—Ä–∞–Ω–µ –Ω–∞ —Å—Ç–æ–π–Ω–æ—Å—Ç–∏—Ç–µ —Å —Ü–µ–ª –±–∏–Ω–∞—Ä–Ω–æ —Ç—ä—Ä—Å–µ–Ω–µ
        - Non-clustered - B-Tree (Balanced Tree) - —Å—ä–∑–¥–∞–≤–∞ —É–Ω–∏–∫–∞–ª–Ω–∏ node-–æ–≤–µ –∏ –≤—Å–µ–∫–∏ node –¥—ä—Ä–∂–∏ pointer –∫—ä–º –∑–∞–ø–∏—Å–∏—Ç–µ
   - –°—ä–∑–¥–∞–≤–∞–π–∫–∏ –∏–Ω–¥–µ–∫—Å–∏ –ø–æ-–±—ä—Ä–∑–æ —á–µ—Ç–µ–º, –Ω–æ –ø–æ-–±–∞–≤–Ω–æ update-–≤–∞–º–µ –∏ —Ç—Ä–∏–µ–º –∑–∞–ø–∏—Å–∏, —Å—ä—â–æ —Ç–∞–∫–∞ –≥—É–±–∏–º –ø–∞–º–µ—Ç.

---

### Database Programmability

1. Functions
- –°—ä–∑–¥–∞–≤–∞–º–µ —Å–∏ –Ω–∞—à–∏ —Ñ—É–∫—Ü–∏–∏ –ø–æ–¥–æ–±–Ω–æ –Ω–∞ view-—Ç–∞
- –°—ä–∑–¥–∞–≤–∞–º–µ —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞
- –ö–∞–∑–≤–∞–º–µ –∫–∞–∫–≤–æ –≤—Ä—ä—â–∞ –∫–∞—Ç–æ —Ç–∏–ø
- –§—É–Ω–∫—Ü–∏–∏—Ç–µ –≤ postgres –±–∏–≤–∞—Ç 3 —Ç–∏–ø–∞
	- STABLE - —Ç–æ–≤–∞ —Å–∞ —Ñ—É–Ω—Ü–∫–∏–∏—Ç–µ, –∫–æ–∏—Ç–æ –ø—Ä–∏ –µ–¥–Ω–∞ –∏ —Å—ä—â–∞ —Ç–∞–±–ª–∏—Ü–∞ –≤—Ä—ä—â–∞—Ç –µ–¥–∏–Ω –∏ —Å—ä—â —Ä–µ–∑—É–ª—Ç–∞—Ç, —Ñ-—Ü–∏—è –∑–∞ –±—Ä–æ—è —Ä–µ–¥–æ–≤–µ
	- IMMUTABLE - —Ñ—É–Ω–∫—Ü–∏—è—Ç–∞ –≤–∏–Ω–∞–≥–∏ —â–µ –≤—Ä—ä—â–∞ –µ–¥–∏–Ω –∏ —Å—ä—â–∏ —Ä–µ–∑—É–ª—Ç–∞—Ç, –Ω–µ–∑–∞–≤–∏—Å–∏–º–∞ –æ—Ç —Ç–∞–±–ª–∏—Ü–∏, –ø—Ä–∏–º–µ—Ä –∫–≤–∞–¥—Ä–∞—Ç –Ω–∞ —á–∏—Å–ª–æ
	- VOLATILE - —Ç–æ–≤–∞ —Å–∞ —Ñ—É–Ω–∫—Ü–∏–∏—Ç–µ –ø–æ-–ø–æ–¥—Ä–∞–∑–±–∏—Ä–∞–Ω–µ, –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏
- –ú–æ–∂–µ–º –¥–∞ –¥–æ—Å—Ç—ä–ø–≤–∞–º–µ –ø—Ä–æ–º–µ–Ω–ª–∏–≤–∏ —á—Ä–µ–∑ $—Ü–∏—Ñ—Ä–∞, –Ω–æ –Ω–µ –µ –ø—Ä–µ–æ–ø–æ—Ä—ä—á–∏—Ç–µ–ª–Ω–æ

2. Procedures
- –ø–æ–≤–µ—á–µ—Ç–æ —Å–ª—É—á–∞–∏ void —Ñ—É–Ω—Ü–∫—Ü–∏–∏
- execute by CALL 

3. Transactions
- –î–µ–π—Å—Ç–∏–≤–∏—è, –∫–æ–∏—Ç–æ –∏–∑–≤—ä—Ä—à–≤–∞–º–µ –≤—ä—Ä—Ö—É –±–∞–∑–∞—Ç–∞ –∏ –º–æ–∂–µ–º –¥–∞ –≤—ä—Ä–Ω–µ–º, –∞–∫–æ –ø–æ–∂–µ–ª–∞–µ–º

```sql
-- Start a transaction
BEGIN;

-- Deduct $100 from Alice's account
UPDATE accounts SET balance = balance - 100 WHERE account_id = 1;

-- Add $100 to Bob's account
UPDATE accounts SET balance = balance + 100 WHERE account_id = 2;

-- Check Bob's new balance
DECLARE
    bob_balance DECIMAL(20,2);
BEGIN
    SELECT balance INTO bob_balance FROM accounts WHERE account_id = 2;
    IF bob_balance > 1000 THEN
        RAISE NOTICE 'Bob has too much money. Rolling back transaction.';
        ROLLBACK;
        RETURN;
    END IF;
END;
```

- Savepoint Example:

```sql
-- Start the transaction
BEGIN;

-- Add some amount
UPDATE accounts SET balance = balance + 50 WHERE id = 1;

-- Create a savepoint
SAVEPOINT my_savepoint;

-- Deduct some amount
UPDATE accounts SET balance = balance - 30 WHERE id = 1;

-- Decide for some reason to rollback to the savepoint
ROLLBACK TO SAVEPOINT my_savepoint;

END;
```

4. Trigger
- Functions executed Before/After a DELETE/UPDATE/INSERT query
- Example:

```sql
CREATE OR REPLACE FUNCTION update_last_modified()
RETURNS TRIGGER AS $$
BEGIN
    NEW.last_modified = CURRENT_TIMESTAMP;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_update_last_modified
BEFORE UPDATE ON products
FOR EACH ROW EXECUTE FUNCTION update_last_modified();
```

*plpgsql - Procedural Language/PostgreSQL
